<!DOCTYPE html>
<html>
<head>
<title>Hungry Horace: Routine at 6000</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Hungry Horace" src="../images/logo-hex.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
</td>
<td class="up">Up: <a href="../maps/all.html#6000">Map</a></td>
<td class="next">
Next: <a href="6229.html">6229</a>
</td>
</tr>
</table>
<div class="description">6000: The game has just loaded</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="6000"></span>6000</td>
<td class="instruction">DI</td>
<td class="comment-1" rowspan="1">Disable interrupts.</td>
</tr>
<tr>
<td class="address-1"><span id="6001"></span>6001</td>
<td class="instruction">LD A,($5C78)</td>
<td class="comment-1" rowspan="9">Initialise the pseudo-random number address.</td>
</tr>
<tr>
<td class="address-1"><span id="6004"></span>6004</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="address-1"><span id="6005"></span>6005</td>
<td class="instruction">AND $1F</td>
</tr>
<tr>
<td class="address-1"><span id="6007"></span>6007</td>
<td class="instruction">LD H,A</td>
</tr>
<tr>
<td class="address-1"><span id="6008"></span>6008</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="6009"></span>6009</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="address-1"><span id="600A"></span>600A</td>
<td class="instruction">AND $1F</td>
</tr>
<tr>
<td class="address-1"><span id="600C"></span>600C</td>
<td class="instruction">LD H,A</td>
</tr>
<tr>
<td class="address-1"><span id="600D"></span>600D</td>
<td class="instruction">LD (<a href="7C67.html">$7C67</a>),HL</td>
</tr>
<tr>
<td class="address-1"><span id="6010"></span>6010</td>
<td class="instruction">LD HL,<a href="7C6A.html">$7C6A</a></td>
<td class="comment-1" rowspan="2">Initialise the 'T' pressed indicator to 'off' (bit 4 set).</td>
</tr>
<tr>
<td class="address-1"><span id="6013"></span>6013</td>
<td class="instruction">LD (HL),$10</td>
</tr>
<tr>
<td class="address-1"><span id="6015"></span>6015</td>
<td class="instruction">LD HL,<a href="7C69.html">$7C69</a></td>
<td class="comment-1" rowspan="2">Initialise the sound indicator to 'on'.</td>
</tr>
<tr>
<td class="address-1"><span id="6018"></span>6018</td>
<td class="instruction">LD (HL),$1F</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="601A"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="673A.html">673A</a> when a game has ended.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="601A"></span>601A</td>
<td class="instruction">LD HL,$5800</td>
<td class="comment-1" rowspan="5">INK 7: PAPER 7</td>
</tr>
<tr>
<td class="address-1"><span id="601D"></span>601D</td>
<td class="instruction">LD DE,$5801</td>
</tr>
<tr>
<td class="address-1"><span id="6020"></span>6020</td>
<td class="instruction">LD BC,$02FF</td>
</tr>
<tr>
<td class="address-1"><span id="6023"></span>6023</td>
<td class="instruction">LD (HL),$3F</td>
</tr>
<tr>
<td class="address-1"><span id="6025"></span>6025</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="6027"></span>6027</td>
<td class="instruction">LD HL,$4000</td>
<td class="comment-1" rowspan="5">Clear the display file.</td>
</tr>
<tr>
<td class="address-1"><span id="602A"></span>602A</td>
<td class="instruction">LD DE,$4001</td>
</tr>
<tr>
<td class="address-1"><span id="602D"></span>602D</td>
<td class="instruction">LD BC,$17FF</td>
</tr>
<tr>
<td class="address-1"><span id="6030"></span>6030</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="address-1"><span id="6032"></span>6032</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="6034"></span>6034</td>
<td class="instruction">LD HL,$5800</td>
<td class="comment-1" rowspan="5">INK 0: PAPER 7</td>
</tr>
<tr>
<td class="address-1"><span id="6037"></span>6037</td>
<td class="instruction">LD DE,$5801</td>
</tr>
<tr>
<td class="address-1"><span id="603A"></span>603A</td>
<td class="instruction">LD BC,$02FF</td>
</tr>
<tr>
<td class="address-1"><span id="603D"></span>603D</td>
<td class="instruction">LD (HL),$38</td>
</tr>
<tr>
<td class="address-1"><span id="603F"></span>603F</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="6041"></span>6041</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Signal demo mode.</td>
</tr>
<tr>
<td class="address-1"><span id="6043"></span>6043</td>
<td class="instruction">LD (<a href="6B0B.html">$6B0B</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="6046"></span>6046</td>
<td class="instruction">LD HL,$008C</td>
<td class="comment-1" rowspan="2">Initialise the title screen countdown timer.</td>
</tr>
<tr>
<td class="address-1"><span id="6049"></span>6049</td>
<td class="instruction">LD (<a href="6B08.html">$6B08</a>),HL</td>
</tr>
<tr>
<td class="address-1"><span id="604C"></span>604C</td>
<td class="instruction">LD DE,$40A0</td>
<td class="comment-1" rowspan="4">Print 'HUNGRY' in big letters.</td>
</tr>
<tr>
<td class="address-1"><span id="604F"></span>604F</td>
<td class="instruction">LD HL,<a href="6E8F.html">$6E8F</a></td>
</tr>
<tr>
<td class="address-1"><span id="6052"></span>6052</td>
<td class="instruction">LD BC,$00A0</td>
</tr>
<tr>
<td class="address-1"><span id="6055"></span>6055</td>
<td class="instruction">CALL <a href="6D4E.html">$6D4E</a></td>
</tr>
<tr>
<td class="address-1"><span id="6058"></span>6058</td>
<td class="instruction">LD DE,$4880</td>
<td class="comment-1" rowspan="4">Print 'HORACE' in big letters.</td>
</tr>
<tr>
<td class="address-1"><span id="605B"></span>605B</td>
<td class="instruction">LD HL,<a href="6F2F.html">$6F2F</a></td>
</tr>
<tr>
<td class="address-1"><span id="605E"></span>605E</td>
<td class="instruction">LD BC,$00A0</td>
</tr>
<tr>
<td class="address-1"><span id="6061"></span>6061</td>
<td class="instruction">CALL <a href="6D4E.html">$6D4E</a></td>
</tr>
<tr>
<td class="address-1"><span id="6064"></span>6064</td>
<td class="instruction">LD A,(<a href="6B0B.html">$6B0B</a>)</td>
<td class="comment-1" rowspan="1">Pick up the game mode indicator.</td>
</tr>
<tr>
<td class="address-1"><span id="6067"></span>6067</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Save it briefly.</td>
</tr>
<tr>
<td class="address-1"><span id="6068"></span>6068</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Signal game mode (to force the copyright message to be printed).</td>
</tr>
<tr>
<td class="address-1"><span id="606A"></span>606A</td>
<td class="instruction">LD (<a href="6B0B.html">$6B0B</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="606D"></span>606D</td>
<td class="instruction">LD HL,$50C0</td>
<td class="comment-1" rowspan="1">This is the display file address for the copyright message.</td>
</tr>
<tr>
<td class="address-1"><span id="6070"></span>6070</td>
<td class="instruction">CALL <a href="6C0F.html">$6C0F</a></td>
<td class="comment-1" rowspan="1">Set <span class="register">HL'</span> to the corresponding attribute file address (unnecessarily).</td>
</tr>
<tr>
<td class="address-1"><span id="6073"></span>6073</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Transfer the display file address to <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="6074"></span>6074</td>
<td class="instruction">LD HL,<a href="6AA7.html">$6AA7</a></td>
<td class="comment-1" rowspan="7">Print 'Copyright &#169; 1982 Beam Software' and 'PRESS ANY KEY TO START PLAY'.</td>
</tr>
<tr>
<td class="address-2"><span id="6077"></span>6077</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="6078"></span>6078</td>
<td class="instruction">CP $FF</td>
</tr>
<tr>
<td class="address-1"><span id="607A"></span>607A</td>
<td class="instruction">JR Z,<a href="6000.html#6082">$6082</a></td>
</tr>
<tr>
<td class="address-1"><span id="607C"></span>607C</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="607D"></span>607D</td>
<td class="instruction">CALL <a href="6B48.html#6B4F">$6B4F</a></td>
</tr>
<tr>
<td class="address-1"><span id="6080"></span>6080</td>
<td class="instruction">JR <a href="6000.html#6077">$6077</a></td>
</tr>
<tr>
<td class="address-2"><span id="6082"></span>6082</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="2">Restore the game mode indicator.</td>
</tr>
<tr>
<td class="address-1"><span id="6083"></span>6083</td>
<td class="instruction">LD (<a href="6B0B.html">$6B0B</a>),A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6086"></span>
<div class="comments">
<div class="paragraph">
The following loop cycles the colour of the words 'HUNGRY HORACE' and plays a sound effect, either 140 times or until a key is pressed.
</div>
<div class="paragraph">
<audio controls="" src="../audio/title.ogg">
<p>Your browser doesn't support HTML5 audio. Here is a <a href="../audio/title.ogg">link to the audio</a> instead.</p>
</audio>
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="6086"></span>6086</td>
<td class="instruction">LD HL,$58A0</td>
<td class="comment-1" rowspan="18">Change the colour of the words 'HUNGRY HORACE' on the title screen.</td>
</tr>
<tr>
<td class="address-1"><span id="6089"></span>6089</td>
<td class="instruction">LD DE,$58A1</td>
</tr>
<tr>
<td class="address-1"><span id="608C"></span>608C</td>
<td class="instruction">LD BC,$009F</td>
</tr>
<tr>
<td class="address-1"><span id="608F"></span>608F</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="6090"></span>6090</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="address-1"><span id="6091"></span>6091</td>
<td class="instruction">AND $3F</td>
</tr>
<tr>
<td class="address-1"><span id="6093"></span>6093</td>
<td class="instruction">OR $38</td>
</tr>
<tr>
<td class="address-1"><span id="6095"></span>6095</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="6096"></span>6096</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="6098"></span>6098</td>
<td class="instruction">LD HL,$5980</td>
</tr>
<tr>
<td class="address-1"><span id="609B"></span>609B</td>
<td class="instruction">LD DE,$5981</td>
</tr>
<tr>
<td class="address-1"><span id="609E"></span>609E</td>
<td class="instruction">LD BC,$009F</td>
</tr>
<tr>
<td class="address-1"><span id="60A1"></span>60A1</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="60A2"></span>60A2</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="address-1"><span id="60A3"></span>60A3</td>
<td class="instruction">AND $3F</td>
</tr>
<tr>
<td class="address-1"><span id="60A5"></span>60A5</td>
<td class="instruction">OR $38</td>
</tr>
<tr>
<td class="address-1"><span id="60A7"></span>60A7</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="60A8"></span>60A8</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="address-1"><span id="60AA"></span>60AA</td>
<td class="instruction">CALL <a href="6A77.html">$6A77</a></td>
<td class="comment-1" rowspan="1">Make the title screen sound effect.</td>
</tr>
<tr>
<td class="address-1"><span id="60AD"></span>60AD</td>
<td class="instruction">LD HL,(<a href="6B08.html">$6B08</a>)</td>
<td class="comment-1" rowspan="3">Decrement the title screen countdown timer.</td>
</tr>
<tr>
<td class="address-1"><span id="60B0"></span>60B0</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="address-1"><span id="60B1"></span>60B1</td>
<td class="instruction">LD (<a href="6B08.html">$6B08</a>),HL</td>
</tr>
<tr>
<td class="address-1"><span id="60B4"></span>60B4</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="2">Is it zero now?</td>
</tr>
<tr>
<td class="address-1"><span id="60B5"></span>60B5</td>
<td class="instruction">OR L</td>
</tr>
<tr>
<td class="address-1"><span id="60B6"></span>60B6</td>
<td class="instruction">JR Z,<a href="6000.html#60C9">$60C9</a></td>
<td class="comment-1" rowspan="1">Jump if so.</td>
</tr>
<tr>
<td class="address-1"><span id="60B8"></span>60B8</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Read the keyboard.</td>
</tr>
<tr>
<td class="address-1"><span id="60BA"></span>60BA</td>
<td class="instruction">IN A,($FE)</td>
</tr>
<tr>
<td class="address-1"><span id="60BC"></span>60BC</td>
<td class="instruction">AND $1F</td>
<td class="comment-1" rowspan="2">Is a key being pressed?</td>
</tr>
<tr>
<td class="address-1"><span id="60BE"></span>60BE</td>
<td class="instruction">CP $1F</td>
</tr>
<tr>
<td class="address-1"><span id="60C0"></span>60C0</td>
<td class="instruction">JR Z,<a href="6000.html#6086">$6086</a></td>
<td class="comment-1" rowspan="1">Jump if not.</td>
</tr>
<tr>
<td class="address-1"><span id="60C2"></span>60C2</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Signal that a game (not demo mode) has started.</td>
</tr>
<tr>
<td class="address-1"><span id="60C4"></span>60C4</td>
<td class="instruction">LD (<a href="6B0B.html">$6B0B</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="60C7"></span>60C7</td>
<td class="instruction">JR <a href="6000.html#60C9">$60C9</a></td>
<td class="comment-1" rowspan="1">This instruction is redundant.</td>
</tr>
<tr>
<td class="address-2"><span id="60C9"></span>60C9</td>
<td class="instruction">LD A,$FF</td>
<td class="comment-1" rowspan="2">Initialise the maze number.</td>
</tr>
<tr>
<td class="address-1"><span id="60CB"></span>60CB</td>
<td class="instruction">LD (<a href="7C63.html">$7C63</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="60CE"></span>60CE</td>
<td class="instruction">LD A,$08</td>
<td class="comment-1" rowspan="2">Initialise the game speed parameter.</td>
</tr>
<tr>
<td class="address-1"><span id="60D0"></span>60D0</td>
<td class="instruction">LD (<a href="7C62.html">$7C62</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="60D3"></span>60D3</td>
<td class="instruction">LD A,$03</td>
<td class="comment-1" rowspan="2">Initialise the number of lives remaining.</td>
</tr>
<tr>
<td class="address-1"><span id="60D5"></span>60D5</td>
<td class="instruction">LD (<a href="7C78.html">$7C78</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="60D8"></span>60D8</td>
<td class="instruction">LD HL,$0000</td>
<td class="comment-1" rowspan="2">Initialise the score.</td>
</tr>
<tr>
<td class="address-1"><span id="60DB"></span>60DB</td>
<td class="instruction">LD (<a href="7C73.html">$7C73</a>),HL</td>
</tr>
<tr>
<td class="address-1"><span id="60DE"></span>60DE</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Initialise the active guard counter.</td>
</tr>
<tr>
<td class="address-1"><span id="60E0"></span>60E0</td>
<td class="instruction">LD (<a href="6B0A.html">$6B0A</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="60E3"></span>60E3</td>
<td class="instruction">LD (<a href="7C77.html">$7C77</a>),A</td>
<td class="comment-1" rowspan="1">Initialise the extra life indicator.</td>
</tr>
<tr>
<td class="address-1"><span id="60E6"></span>60E6</td>
<td class="instruction">CALL <a href="6A22.html">$6A22</a></td>
<td class="comment-1" rowspan="1">Initialise the guard countdown timers.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="60E9"></span>
<div class="comments">
<div class="paragraph">
This entry point is used when moving from one maze to the next by the routines at <a href="673A.html">673A</a> (in demo mode) and <a href="6A1E.html">6A1E</a> (in game mode).
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="60E9"></span>60E9</td>
<td class="instruction">LD A,(<a href="7C63.html">$7C63</a>)</td>
<td class="comment-1" rowspan="1">Pick up the current maze number (0-3).</td>
</tr>
<tr>
<td class="address-1"><span id="60EC"></span>60EC</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="2">Is it 0, 1 or 2?</td>
</tr>
<tr>
<td class="address-1"><span id="60ED"></span>60ED</td>
<td class="instruction">AND $FC</td>
</tr>
<tr>
<td class="address-1"><span id="60EF"></span>60EF</td>
<td class="instruction">JR Z,<a href="6000.html#60FC">$60FC</a></td>
<td class="comment-1" rowspan="1">Jump if so.</td>
</tr>
<tr>
<td class="address-1"><span id="60F1"></span>60F1</td>
<td class="instruction">LD A,(<a href="7C62.html">$7C62</a>)</td>
<td class="comment-1" rowspan="5">Decrement the game speed parameter (unless it's already 1). This increases the speed of the game.</td>
</tr>
<tr>
<td class="address-1"><span id="60F4"></span>60F4</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="address-1"><span id="60F5"></span>60F5</td>
<td class="instruction">JR NZ,<a href="6000.html#60F9">$60F9</a></td>
</tr>
<tr>
<td class="address-1"><span id="60F7"></span>60F7</td>
<td class="instruction">LD A,$01</td>
</tr>
<tr>
<td class="address-2"><span id="60F9"></span>60F9</td>
<td class="instruction">LD (<a href="7C62.html">$7C62</a>),A</td>
</tr>
<tr>
<td class="address-2"><span id="60FC"></span>60FC</td>
<td class="instruction">LD A,(<a href="7C63.html">$7C63</a>)</td>
<td class="comment-1" rowspan="4">Increment the maze number.</td>
</tr>
<tr>
<td class="address-1"><span id="60FF"></span>60FF</td>
<td class="instruction">INC A</td>
</tr>
<tr>
<td class="address-1"><span id="6100"></span>6100</td>
<td class="instruction">AND $03</td>
</tr>
<tr>
<td class="address-1"><span id="6102"></span>6102</td>
<td class="instruction">LD (<a href="7C63.html">$7C63</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="6105"></span>6105</td>
<td class="instruction">LD A,(<a href="7C63.html">$7C63</a>)</td>
<td class="comment-1" rowspan="1">Pick up the current maze number.</td>
</tr>
<tr>
<td class="address-1"><span id="6108"></span>6108</td>
<td class="instruction">CP $00</td>
<td class="comment-1" rowspan="1">Is it maze 1?</td>
</tr>
<tr>
<td class="address-1"><span id="610A"></span>610A</td>
<td class="instruction">JR NZ,<a href="6000.html#6117">$6117</a></td>
<td class="comment-1" rowspan="1">Jump if not.</td>
</tr>
<tr>
<td class="address-1"><span id="610C"></span>610C</td>
<td class="instruction">LD HL,<a href="6FD7.html">$6FD7</a></td>
<td class="comment-1" rowspan="2">Copy the tunnel offset and bell, initial guard and entrance locations for maze 1 to <a href="6FCF.html">6FCF</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="610F"></span>610F</td>
<td class="instruction">CALL <a href="6A9E.html">$6A9E</a></td>
</tr>
<tr>
<td class="address-1"><span id="6112"></span>6112</td>
<td class="instruction">LD HL,<a href="72F7.html">$72F7</a></td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at the layout data for maze 1.</td>
</tr>
<tr>
<td class="address-1"><span id="6115"></span>6115</td>
<td class="instruction">JR <a href="6000.html#6140">$6140</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="6117"></span>6117</td>
<td class="instruction">CP $01</td>
<td class="comment-1" rowspan="1">Is it maze 2?</td>
</tr>
<tr>
<td class="address-1"><span id="6119"></span>6119</td>
<td class="instruction">JR NZ,<a href="6000.html#6126">$6126</a></td>
<td class="comment-1" rowspan="1">Jump if not.</td>
</tr>
<tr>
<td class="address-1"><span id="611B"></span>611B</td>
<td class="instruction">LD HL,<a href="6FDF.html">$6FDF</a></td>
<td class="comment-1" rowspan="2">Copy the tunnel offset and bell, initial guard and entrance locations for maze 2 to <a href="6FCF.html">6FCF</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="611E"></span>611E</td>
<td class="instruction">CALL <a href="6A9E.html">$6A9E</a></td>
</tr>
<tr>
<td class="address-1"><span id="6121"></span>6121</td>
<td class="instruction">LD HL,<a href="6FF7.html">$6FF7</a></td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at the layout data for maze 2.</td>
</tr>
<tr>
<td class="address-1"><span id="6124"></span>6124</td>
<td class="instruction">JR <a href="6000.html#6140">$6140</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="6126"></span>6126</td>
<td class="instruction">CP $02</td>
<td class="comment-1" rowspan="1">Is it maze 3?</td>
</tr>
<tr>
<td class="address-1"><span id="6128"></span>6128</td>
<td class="instruction">JR NZ,<a href="6000.html#6135">$6135</a></td>
<td class="comment-1" rowspan="1">Jump if not.</td>
</tr>
<tr>
<td class="address-1"><span id="612A"></span>612A</td>
<td class="instruction">LD HL,<a href="6FE7.html">$6FE7</a></td>
<td class="comment-1" rowspan="2">Copy the tunnel offset and bell, initial guard and entrance locations for maze 3 to <a href="6FCF.html">6FCF</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="612D"></span>612D</td>
<td class="instruction">CALL <a href="6A9E.html">$6A9E</a></td>
</tr>
<tr>
<td class="address-1"><span id="6130"></span>6130</td>
<td class="instruction">LD HL,<a href="75F7.html">$75F7</a></td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at the layout data for maze 3.</td>
</tr>
<tr>
<td class="address-1"><span id="6133"></span>6133</td>
<td class="instruction">JR <a href="6000.html#6140">$6140</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="6135"></span>6135</td>
<td class="instruction">LD HL,<a href="6FEF.html">$6FEF</a></td>
<td class="comment-1" rowspan="2">Copy the tunnel offset and bell, initial guard and entrance locations for maze 4 to <a href="6FCF.html">6FCF</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="6138"></span>6138</td>
<td class="instruction">CALL <a href="6A9E.html">$6A9E</a></td>
</tr>
<tr>
<td class="address-1"><span id="613B"></span>613B</td>
<td class="instruction">LD HL,<a href="78F7.html">$78F7</a></td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at the layout data for maze 4.</td>
</tr>
<tr>
<td class="address-1"><span id="613E"></span>613E</td>
<td class="instruction">JR <a href="6000.html#6140">$6140</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="6140"></span>6140</td>
<td class="instruction">LD DE,$4000</td>
<td class="comment-1" rowspan="3">Draw the current maze.</td>
</tr>
<tr>
<td class="address-1"><span id="6143"></span>6143</td>
<td class="instruction">LD BC,$0300</td>
</tr>
<tr>
<td class="address-1"><span id="6146"></span>6146</td>
<td class="instruction">CALL <a href="6B75.html">$6B75</a></td>
</tr>
<tr>
<td class="address-1"><span id="6149"></span>6149</td>
<td class="instruction">LD A,(<a href="6B0B.html">$6B0B</a>)</td>
<td class="comment-1" rowspan="1">Pick up the game mode indicator.</td>
</tr>
<tr>
<td class="address-1"><span id="614C"></span>614C</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Is it demo mode?</td>
</tr>
<tr>
<td class="address-1"><span id="614D"></span>614D</td>
<td class="instruction">JR Z,<a href="6000.html#6164">$6164</a></td>
<td class="comment-1" rowspan="1">Jump if so.</td>
</tr>
<tr>
<td class="address-1"><span id="614F"></span>614F</td>
<td class="instruction">LD HL,$4000</td>
<td class="comment-1" rowspan="1">This is the display file address for 'PASSES&#160;&#160;&#160;SCORE&#160;&#160;&#160;&#160;&#160;&#160;&#160;BEST'.</td>
</tr>
<tr>
<td class="address-1"><span id="6152"></span>6152</td>
<td class="instruction">CALL <a href="6C0F.html">$6C0F</a></td>
<td class="comment-1" rowspan="1">Set <span class="register">HL'</span> to the corresponding attribute file address (unnecessarily).</td>
</tr>
<tr>
<td class="address-1"><span id="6155"></span>6155</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Transfer the display file address to <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="6156"></span>6156</td>
<td class="instruction">LD HL,<a href="7C47.html">$7C47</a></td>
<td class="comment-1" rowspan="7">Print 'PASSES&#160;&#160;&#160;SCORE&#160;&#160;&#160;&#160;&#160;&#160;&#160;BEST'.</td>
</tr>
<tr>
<td class="address-2"><span id="6159"></span>6159</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="615A"></span>615A</td>
<td class="instruction">CP $FF</td>
</tr>
<tr>
<td class="address-1"><span id="615C"></span>615C</td>
<td class="instruction">JR Z,<a href="6000.html#618F">$618F</a></td>
</tr>
<tr>
<td class="address-1"><span id="615E"></span>615E</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="615F"></span>615F</td>
<td class="instruction">CALL <a href="6B48.html#6B4F">$6B4F</a></td>
</tr>
<tr>
<td class="address-1"><span id="6162"></span>6162</td>
<td class="instruction">JR <a href="6000.html#6159">$6159</a></td>
</tr>
<tr>
<td class="address-2"><span id="6164"></span>6164</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Signal game mode (to force the 'DEMO MODE' text to be printed).</td>
</tr>
<tr>
<td class="address-1"><span id="6166"></span>6166</td>
<td class="instruction">LD (<a href="6B0B.html">$6B0B</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="6169"></span>6169</td>
<td class="instruction">LD HL,$4000</td>
<td class="comment-1" rowspan="1">This is the display file address for 'DEMO MODE&#160;&#160;PRESS ANY KEY TO PLAY'.</td>
</tr>
<tr>
<td class="address-1"><span id="616C"></span>616C</td>
<td class="instruction">CALL <a href="6C0F.html">$6C0F</a></td>
<td class="comment-1" rowspan="1">Set <span class="register">HL'</span> to the corresponding attribute file address (unnecessarily).</td>
</tr>
<tr>
<td class="address-1"><span id="616F"></span>616F</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Transfer the display file address to <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="6170"></span>6170</td>
<td class="instruction">LD HL,<a href="6AE7.html">$6AE7</a></td>
<td class="comment-1" rowspan="7">Print 'DEMO MODE&#160;&#160;PRESS ANY KEY TO PLAY'.</td>
</tr>
<tr>
<td class="address-2"><span id="6173"></span>6173</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="6174"></span>6174</td>
<td class="instruction">CP $FF</td>
</tr>
<tr>
<td class="address-1"><span id="6176"></span>6176</td>
<td class="instruction">JR Z,<a href="6000.html#617E">$617E</a></td>
</tr>
<tr>
<td class="address-1"><span id="6178"></span>6178</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="6179"></span>6179</td>
<td class="instruction">CALL <a href="6B48.html#6B4F">$6B4F</a></td>
</tr>
<tr>
<td class="address-1"><span id="617C"></span>617C</td>
<td class="instruction">JR <a href="6000.html#6173">$6173</a></td>
</tr>
<tr>
<td class="address-2"><span id="617E"></span>617E</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Restore the game mode indicator to demo mode.</td>
</tr>
<tr>
<td class="address-1"><span id="6180"></span>6180</td>
<td class="instruction">LD (<a href="6B0B.html">$6B0B</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="6183"></span>6183</td>
<td class="instruction">LD HL,$5800</td>
<td class="comment-1" rowspan="7">Make 'DEMO MODE' flash.</td>
</tr>
<tr>
<td class="address-1"><span id="6186"></span>6186</td>
<td class="instruction">LD B,$09</td>
</tr>
<tr>
<td class="address-2"><span id="6188"></span>6188</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="6189"></span>6189</td>
<td class="instruction">ADD A,$80</td>
</tr>
<tr>
<td class="address-1"><span id="618B"></span>618B</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="618C"></span>618C</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="618D"></span>618D</td>
<td class="instruction">DJNZ <a href="6000.html#6188">$6188</a></td>
</tr>
<tr>
<td class="address-2"><span id="618F"></span>618F</td>
<td class="instruction">LD HL,(<a href="6FCF.html#6FD1">$6FD1</a>)</td>
<td class="comment-1" rowspan="2">Copy the bell location to <a href="7CC4.html">7CC4</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="6192"></span>6192</td>
<td class="instruction">LD (<a href="7CC4.html">$7CC4</a>),HL</td>
</tr>
<tr>
<td class="address-1"><span id="6195"></span>6195</td>
<td class="instruction">LD HL,$4007</td>
<td class="comment-1" rowspan="1">This is the display file address for the number of lives remaining.</td>
</tr>
<tr>
<td class="address-1"><span id="6198"></span>6198</td>
<td class="instruction">CALL <a href="6C0F.html">$6C0F</a></td>
<td class="comment-1" rowspan="1">Set <span class="register">HL'</span> to the corresponding attribute file address (unnecessarily).</td>
</tr>
<tr>
<td class="address-1"><span id="619B"></span>619B</td>
<td class="instruction">LD A,(<a href="7C78.html">$7C78</a>)</td>
<td class="comment-1" rowspan="1">Pick up the number of lives remaining.</td>
</tr>
<tr>
<td class="address-1"><span id="619E"></span>619E</td>
<td class="instruction">ADD A,"0"</td>
<td class="comment-1" rowspan="1">Convert it to the ASCII code for the corresponding digit.</td>
</tr>
<tr>
<td class="address-1"><span id="61A0"></span>61A0</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Transfer the display file address to <span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="61A1"></span>61A1</td>
<td class="instruction">CALL <a href="6B48.html#6B4F">$6B4F</a></td>
<td class="comment-1" rowspan="1">Print the number of lives remaining.</td>
</tr>
<tr>
<td class="address-1"><span id="61A4"></span>61A4</td>
<td class="instruction">LD HL,$07D0</td>
<td class="comment-1" rowspan="2">Initialise the lunch-drop countdown timer.</td>
</tr>
<tr>
<td class="address-1"><span id="61A7"></span>61A7</td>
<td class="instruction">LD (<a href="7C65.html">$7C65</a>),HL</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="61AA"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="673A.html">673A</a> after Horace has lost a life.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="61AA"></span>61AA</td>
<td class="instruction">LD HL,(<a href="7CC4.html">$7CC4</a>)</td>
<td class="comment-1" rowspan="1">Pick up the bell location.</td>
</tr>
<tr>
<td class="address-1"><span id="61AD"></span>61AD</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="2">Has Horace sounded the alarm?</td>
</tr>
<tr>
<td class="address-1"><span id="61AE"></span>61AE</td>
<td class="instruction">OR L</td>
</tr>
<tr>
<td class="address-1"><span id="61AF"></span>61AF</td>
<td class="instruction">JR Z,<a href="6000.html#61B7">$61B7</a></td>
<td class="comment-1" rowspan="1">Jump if so.</td>
</tr>
<tr>
<td class="address-1"><span id="61B1"></span>61B1</td>
<td class="instruction">LD HL,(<a href="6FCF.html#6FD1">$6FD1</a>)</td>
<td class="comment-1" rowspan="2">Reinitialise the bell location.</td>
</tr>
<tr>
<td class="address-1"><span id="61B4"></span>61B4</td>
<td class="instruction">LD (<a href="7CC4.html">$7CC4</a>),HL</td>
</tr>
<tr>
<td class="address-2"><span id="61B7"></span>61B7</td>
<td class="instruction">LD B,$04</td>
<td class="comment-1" rowspan="1">There are four guards.</td>
</tr>
<tr>
<td class="address-2"><span id="61B9"></span>61B9</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="3">Copy the guard's buffer into the temporary location (<a href="6DB8.html">6DB8</a>).</td>
</tr>
<tr>
<td class="address-1"><span id="61BA"></span>61BA</td>
<td class="instruction">CALL <a href="6A3F.html">$6A3F</a></td>
</tr>
<tr>
<td class="address-1"><span id="61BD"></span>61BD</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="address-1"><span id="61BE"></span>61BE</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Save the guard counter.</td>
</tr>
<tr>
<td class="address-1"><span id="61BF"></span>61BF</td>
<td class="instruction">SLA B</td>
<td class="comment-1" rowspan="6">Point <span class="register">HL</span> at one of the guard countdown timers at <a href="6DA6.html">6DA6</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="61C1"></span>61C1</td>
<td class="instruction">LD C,B</td>
</tr>
<tr>
<td class="address-1"><span id="61C2"></span>61C2</td>
<td class="instruction">LD B,$00</td>
</tr>
<tr>
<td class="address-1"><span id="61C4"></span>61C4</td>
<td class="instruction">XOR A</td>
</tr>
<tr>
<td class="address-1"><span id="61C5"></span>61C5</td>
<td class="instruction">LD HL,$6DAE</td>
</tr>
<tr>
<td class="address-1"><span id="61C8"></span>61C8</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="address-1"><span id="61CA"></span>61CA</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Is this guard in play?</td>
</tr>
<tr>
<td class="address-1"><span id="61CB"></span>61CB</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="61CC"></span>61CC</td>
<td class="instruction">OR (HL)</td>
</tr>
<tr>
<td class="address-1"><span id="61CD"></span>61CD</td>
<td class="instruction">JR NZ,<a href="6000.html#61D4">$61D4</a></td>
<td class="comment-1" rowspan="1">Jump if not.</td>
</tr>
<tr>
<td class="address-1"><span id="61CF"></span>61CF</td>
<td class="instruction">LD HL,(<a href="6FCF.html#6FD3">$6FD3</a>)</td>
<td class="comment-1" rowspan="1">Pick up the initial guard location for the current maze.</td>
</tr>
<tr>
<td class="address-1"><span id="61D2"></span>61D2</td>
<td class="instruction">JR <a href="6000.html#61D7">$61D7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="61D4"></span>61D4</td>
<td class="instruction">LD HL,(<a href="6FCF.html#6FD5">$6FD5</a>)</td>
<td class="comment-1" rowspan="1">Pick up the bell location for the current maze.</td>
</tr>
<tr>
<td class="address-2"><span id="61D7"></span>61D7</td>
<td class="instruction">LD (<a href="6DB8.html">$6DB8</a>),HL</td>
<td class="comment-1" rowspan="2">Initialise the guard's current and new locations.</td>
</tr>
<tr>
<td class="address-1"><span id="61DA"></span>61DA</td>
<td class="instruction">LD (<a href="6DB8.html#6DBC">$6DBC</a>),HL</td>
</tr>
<tr>
<td class="address-1"><span id="61DD"></span>61DD</td>
<td class="instruction">LD HL,<a href="6DB8.html#6DBF">$6DBF</a></td>
<td class="comment-1" rowspan="10">Clear the four maze background tiles in the temporary guard buffer.</td>
</tr>
<tr>
<td class="address-1"><span id="61E0"></span>61E0</td>
<td class="instruction">LD C,$04</td>
</tr>
<tr>
<td class="address-2"><span id="61E2"></span>61E2</td>
<td class="instruction">LD (HL),$3E</td>
</tr>
<tr>
<td class="address-1"><span id="61E4"></span>61E4</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="61E5"></span>61E5</td>
<td class="instruction">LD B,$08</td>
</tr>
<tr>
<td class="address-2"><span id="61E7"></span>61E7</td>
<td class="instruction">LD (HL),$00</td>
</tr>
<tr>
<td class="address-1"><span id="61E9"></span>61E9</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="address-1"><span id="61EA"></span>61EA</td>
<td class="instruction">DJNZ <a href="6000.html#61E7">$61E7</a></td>
</tr>
<tr>
<td class="address-1"><span id="61EC"></span>61EC</td>
<td class="instruction">DEC C</td>
</tr>
<tr>
<td class="address-1"><span id="61ED"></span>61ED</td>
<td class="instruction">JR NZ,<a href="6000.html#61E2">$61E2</a></td>
</tr>
<tr>
<td class="address-1"><span id="61EF"></span>61EF</td>
<td class="instruction">CALL <a href="6A6A.html">$6A6A</a></td>
<td class="comment-1" rowspan="1">Copy the guard's buffer back to the original location.</td>
</tr>
<tr>
<td class="address-1"><span id="61F2"></span>61F2</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore the guard counter to <span class="register">B</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="61F3"></span>61F3</td>
<td class="instruction">DJNZ <a href="6000.html#61B9">$61B9</a></td>
<td class="comment-1" rowspan="1">Jump back to prepare the next guard.</td>
</tr>
<tr>
<td class="address-1"><span id="61F5"></span>61F5</td>
<td class="instruction">LD HL,(<a href="6FCF.html#6FD5">$6FD5</a>)</td>
<td class="comment-1" rowspan="1">Pick up Horace's initial location for the current maze.</td>
</tr>
<tr>
<td class="address-1"><span id="61F8"></span>61F8</td>
<td class="instruction">LD (<a href="7C6B.html">$7C6B</a>),HL</td>
<td class="comment-1" rowspan="2">Initialise Horace's current and new locations.</td>
</tr>
<tr>
<td class="address-1"><span id="61FB"></span>61FB</td>
<td class="instruction">LD (<a href="7C6D.html">$7C6D</a>),HL</td>
</tr>
<tr>
<td class="address-1"><span id="61FE"></span>61FE</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="2">Initialise Horace's animation frame.</td>
</tr>
<tr>
<td class="address-1"><span id="6200"></span>6200</td>
<td class="instruction">LD (<a href="7C70.html">$7C70</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="6203"></span>6203</td>
<td class="instruction">LD A,(<a href="7C62.html">$7C62</a>)</td>
<td class="comment-1" rowspan="2">Initialise the sprite movement timer (using the value of the game speed parameter).</td>
</tr>
<tr>
<td class="address-1"><span id="6206"></span>6206</td>
<td class="instruction">LD (<a href="7C61.html">$7C61</a>),A</td>
</tr>
<tr>
<td class="address-1"><span id="6209"></span>6209</td>
<td class="instruction">LD HL,(<a href="7C73.html">$7C73</a>)</td>
<td class="comment-1" rowspan="2">Print the score and make a sound effect.</td>
</tr>
<tr>
<td class="address-1"><span id="620C"></span>620C</td>
<td class="instruction">CALL <a href="65A1.html#65C7">$65C7</a></td>
</tr>
<tr>
<td class="address-1"><span id="620F"></span>620F</td>
<td class="instruction">LD HL,(<a href="7C75.html">$7C75</a>)</td>
<td class="comment-1" rowspan="1">Pick up the high score.</td>
</tr>
<tr>
<td class="address-1"><span id="6212"></span>6212</td>
<td class="instruction">LD DE,$4000</td>
<td class="comment-1" rowspan="5">Set <span class="register">DE</span> to the display file address for the high score (in a roundabout way).</td>
</tr>
<tr>
<td class="address-1"><span id="6215"></span>6215</td>
<td class="instruction">EX DE,HL</td>
</tr>
<tr>
<td class="address-1"><span id="6216"></span>6216</td>
<td class="instruction">LD BC,$001A</td>
</tr>
<tr>
<td class="address-1"><span id="6219"></span>6219</td>
<td class="instruction">ADD HL,BC</td>
</tr>
<tr>
<td class="address-1"><span id="621A"></span>621A</td>
<td class="instruction">EX DE,HL</td>
</tr>
<tr>
<td class="address-1"><span id="621B"></span>621B</td>
<td class="instruction">CALL <a href="6B21.html">$6B21</a></td>
<td class="comment-1" rowspan="1">Print the high score.</td>
</tr>
<tr>
<td class="address-1"><span id="621E"></span>621E</td>
<td class="instruction">LD HL,$0000</td>
<td class="comment-1" rowspan="2">Initialise the guard panic timer.</td>
</tr>
<tr>
<td class="address-1"><span id="6221"></span>6221</td>
<td class="instruction">LD (<a href="6DAE.html">$6DAE</a>),HL</td>
</tr>
<tr>
<td class="address-1"><span id="6224"></span>6224</td>
<td class="instruction">LD A,$39</td>
<td class="comment-1" rowspan="2">Initialise Horace's attribute byte (INK 1: PAPER 7).</td>
</tr>
<tr>
<td class="address-1"><span id="6226"></span>6226</td>
<td class="instruction">LD (<a href="7C71.html">$7C71</a>),A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<div class="comments">
<div class="paragraph">
This routine continues into the main loop at <a href="6229.html">6229</a>.
</div>
</div>
</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
</td>
<td class="up">Up: <a href="../maps/all.html#6000">Map</a></td>
<td class="next">
Next: <a href="6229.html">6229</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Hungry Horace RAM disassembly 20221122</div>
<div class="copyright">&#169; 1982 Beam Software. &#169; 2022 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.8.</div>
<div><a href="../dec/asm/24576.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>